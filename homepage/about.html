<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>About Us - Pleasant Township Fire Department</title>
    <link rel="icon" type="image/png" href="https://i.ibb.co/99qZXDKR/ptfdlogo.png">
    <script src="https://cdn.tailwindcss.com"></script>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <link href="https://fonts.googleapis.com/css2?family=Montserrat:wght@400;500;600;700;800&display=swap" rel="stylesheet">
    
    <style>
        body { font-family: 'Montserrat', sans-serif; }
        .gold-text { color: #d4af37; }
        .gold-border { border-color: #d4af37; }
        .bg-gold { background-color: #d4af37; }
        .nav-link { position: relative; }
        .nav-link::after {
            content: '';
            position: absolute;
            width: 0;
            height: 2px;
            bottom: -4px;
            left: 0;
            background-color: #d4af37;
            transition: width 0.3s;
        }
        .nav-link:hover::after { width: 100%; }

        /* ABOUT CAROUSEL STYLES */
        .about-carousel-container {
            position: relative;
            width: 100%;
            height: 100%;
            min-height: 400px; /* Ensure height matches text column roughly */
            overflow: hidden;
            border-radius: 0.5rem;
        }
        .about-slide {
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background-size: cover;
            background-position: center;
            opacity: 0;
            transition: opacity 1.0s ease-in-out;
        }
        .about-slide.active { opacity: 1; }
        
        .carousel-btn {
            position: absolute;
            top: 50%;
            transform: translateY(-50%);
            background: rgba(0,0,0,0.6);
            color: white;
            border: none;
            cursor: pointer;
            padding: 10px 15px;
            z-index: 10;
            transition: background 1.0s;
        }
        .carousel-btn:hover { background: rgba(185, 28, 28, 0.9); }
        .btn-left { left: 0; border-top-right-radius: 5px; border-bottom-right-radius: 5px; }
        .btn-right { right: 0; border-top-left-radius: 5px; border-bottom-left-radius: 5px; }

    </style>
</head>
<body class="bg-gray-50 flex flex-col min-h-screen">

    <header class="bg-white shadow-lg sticky top-0 z-50">
        <div class="container mx-auto px-4">
            <div class="flex justify-between items-center py-3">
                <a href="index.html" class="flex items-center gap-3 group">
                    <img src="https://i.ibb.co/99qZXDKR/ptfdlogo.png" alt="PTFD Logo" class="h-12 w-auto group-hover:scale-105 transition transform">
                    <div>
                        <h1 class="text-lg md:text-xl font-extrabold text-gray-900 leading-none">PLEASANT TOWNSHIP</h1>
                        <h2 class="text-xs md:text-sm font-bold text-red-700 tracking-wider">FIRE DEPARTMENT</h2>
                    </div>
                </a>
                <nav class="hidden md:flex items-center gap-8 font-semibold text-sm text-gray-800 uppercase tracking-wide">
                    <a href="index.html" class="nav-link hover:text-red-700 transition">Home</a>
                    <a href="about.html" class="nav-link text-red-700">About Us</a>
                    <a href="staff.html" class="nav-link hover:text-red-700 transition">Command Staff</a>
                    <a href="apparatus.html" class="nav-link hover:text-red-700 transition">Apparatus</a>
                    <a href="recruitment.html" class="nav-link hover:text-red-700 transition">Recruitment</a>
                    <a href="contact.html" class="bg-red-700 text-white px-5 py-2 rounded hover:bg-red-800 transition">Contact</a>
                </nav>
                <button class="md:hidden text-2xl text-gray-800" onclick="document.getElementById('mobile-menu').classList.toggle('hidden')"><i class="fa-solid fa-bars"></i></button>
            </div>
        </div>
        <div id="mobile-menu" class="hidden md:hidden bg-gray-100 border-t border-gray-200">
            <div class="flex flex-col p-4 gap-4 font-semibold text-gray-700">
                <a href="index.html">Home</a>
                <a href="about.html" class="text-red-700">About Us</a>
                <a href="staff.html">Command Staff</a>
                <a href="apparatus.html">Apparatus</a>
                <a href="recruitment.html">Recruitment</a>
                <a href="contact.html" class="text-red-700">Contact</a>
            </div>
        </div>
    </header>

    <div class="page-header bg-gray-900 text-white py-24 text-center relative overflow-hidden" style="background-image: linear-gradient(rgba(0,0,0,0.7), rgba(0,0,0,0.7)), url('https://images.unsplash.com/photo-1594955938563-356a68f6ba3a?ixlib=rb-4.0.3'); background-size: cover; background-position: center;">
        <div class="relative z-10">
            <h1 class="text-4xl md:text-5xl font-extrabold mb-2 uppercase tracking-tight">Our History & Mission</h1>
            <p class="text-gray-300 text-lg max-w-2xl mx-auto">Proudly serving our community with dedication, courage, and compassion for over 75 years.</p>
        </div>
        <div class="absolute bottom-0 left-0 w-full h-2 bg-gradient-to-r from-red-700 via-yellow-500 to-red-700"></div>
    </div>

    <div class="container mx-auto px-4 py-16">
        
        <div class="grid grid-cols-1 md:grid-cols-3 gap-8 mb-20 text-center">
            <div class="bg-white p-8 rounded-lg shadow-lg border-t-4 border-red-700">
                <div class="text-4xl text-red-700 mb-4"><i class="fa-solid fa-fire-extinguisher"></i></div>
                <h3 class="text-xl font-bold mb-2">Fire Suppression</h3>
                <p class="text-gray-600">Rapid response to structural, vehicle, and wildland fires to protect life and property.</p>
            </div>
            <div class="bg-white p-8 rounded-lg shadow-lg border-t-4 border-yellow-500">
                <div class="text-4xl text-yellow-500 mb-4"><i class="fa-solid fa-heart-pulse"></i></div>
                <h3 class="text-xl font-bold mb-2">Emergency Medical</h3>
                <p class="text-gray-600">Advanced and Basic Life Support services provided by highly trained EMTs and Paramedics.</p>
            </div>
            <div class="bg-white p-8 rounded-lg shadow-lg border-t-4 border-red-700">
                <div class="text-4xl text-red-700 mb-4"><i class="fa-solid fa-hands-holding-child"></i></div>
                <h3 class="text-xl font-bold mb-2">Public Safety</h3>
                <p class="text-gray-600">Community outreach, fire prevention education, and safety inspections for a safer township.</p>
            </div>
        </div>

        <div class="flex flex-col lg:flex-row items-center gap-12 mb-20">
            <div class="lg:w-1/2">
                <h2 class="text-3xl font-bold text-gray-900 mb-6 border-l-8 border-red-700 pl-4">Our History</h2>
                <div class="text-gray-700 space-y-4 leading-relaxed text-justify">
                    <p>The Pleasant Township Fire Department was established in 1948 by a group of dedicated community members who recognized the need for local fire protection. Starting with a single used pumper truck and a small garage, the department has grown into a modern public safety agency.</p>
                    <p>Throughout the decades, PTFD has evolved to meet the changing needs of Catawba and Pleasant Township. In the 1970s, we expanded our services to include emergency medical response, acknowledging that medical calls constitute the majority of modern emergency requests.</p>
                    <p>Today, our department operates out of a centrally located station with a fleet of modern apparatus. Our team consists of a blend of part-time and volunteer professionals who dedicate thousands of hours annually to training and response. While technology and tactics have changed since 1948, our core commitment remains the same: <strong>Neighbors helping neighbors.</strong></p>
                </div>
            </div>

            <div class="lg:w-1/2 w-full">
                <div class="about-carousel-container shadow-2xl bg-gray-200" id="about-carousel-wrapper">
                    <div class="about-slide active" style="background-image: url('https://images.unsplash.com/photo-1594955938563-356a68f6ba3a');"></div>
                    
                    <button class="carousel-btn btn-left" onclick="moveAboutSlide(-1)">
                        <i class="fa-solid fa-chevron-left"></i>
                    </button>
                    <button class="carousel-btn btn-right" onclick="moveAboutSlide(1)">
                        <i class="fa-solid fa-chevron-right"></i>
                    </button>
                </div>
            </div>
        </div>

        <div class="bg-gray-900 rounded-2xl p-12 text-center text-white relative overflow-hidden shadow-2xl">
            <div class="relative z-10">
                <h2 class="text-3xl font-bold mb-4">Be Part of Our Future</h2>
                <p class="text-gray-300 mb-8 max-w-2xl mx-auto">We are always looking for motivated individuals to join our ranks. Whether you are interested in firefighting, EMS, or auxiliary support, there is a place for you at PTFD.</p>
                <a href="recruitment.html" class="inline-block bg-red-700 hover:bg-red-800 text-white font-bold py-3 px-8 rounded shadow-lg transition transform hover:-translate-y-1">JOIN OUR TEAM</a>
            </div>
            <i class="fa-solid fa-helmet-safety absolute -bottom-10 -right-10 text-9xl text-gray-800 opacity-50 rotate-12"></i>
        </div>

    </div>

    <footer class="bg-black text-white pt-16 pb-8 border-t-4 border-yellow-500">
        <div class="container mx-auto px-4">
            <div class="border-t border-gray-800 pt-8 flex flex-col md:flex-row justify-between items-center text-xs text-gray-600">
                <p>&copy; <script>document.write(new Date().getFullYear())</script> Pleasant Township Fire Department. All Rights Reserved.</p>
                <div class="mt-2 md:mt-0 space-x-4">
                    <a href="#" class="hover:text-gray-400">Privacy Policy</a>
                    <a href="#" class="hover:text-gray-400">Terms of Use</a>
                </div>
            </div>
        </div>
    </footer>

    <script type="module">
        import { initializeApp } from "https://www.gstatic.com/firebasejs/11.6.1/firebase-app.js";
        import { getAuth, signInAnonymously } from "https://www.gstatic.com/firebasejs/11.6.1/firebase-auth.js";
        import { getFirestore, doc, onSnapshot } from "https://www.gstatic.com/firebasejs/11.6.1/firebase-firestore.js";

        const firebaseConfig = {
          apiKey: "AIzaSyCTgIo9ko496RYRwMA2dhau8NoqTdi8hW0",
          authDomain: "pleasant-fire-website.firebaseapp.com",
          projectId: "pleasant-fire-website",
          storageBucket: "pleasant-fire-website.firebasestorage.app",
          messagingSenderId: "15677000004",
          appId: "1:15677000004:web:57e89a5c93f36c3583af11",
          measurementId: "G-WCBPLK01B1"
        };

        const app = initializeApp(firebaseConfig);
        const auth = getAuth(app);
        const db = getFirestore(app);
        const appId = 'pleasant-fire-website';

        const DEFAULT_ABOUT_HERO = "https://images.unsplash.com/photo-1594955938563-356a68f6ba3a?ixlib=rb-4.0.3&auto=format&fit=crop&w=1920&q=80";
        const DEFAULT_ABOUT_IMG = "https://images.unsplash.com/photo-1589828276332-9ca99f92a9c3?ixlib=rb-4.0.3&auto=format&fit=crop&w=800&q=80";
        const CACHE_KEY = `ptfd_${appId}_config_cache`;

        // SLIDESHOW STATE
        let aboutSlideIndex = 0;
        let aboutSlides = [];
        let slideInterval;

        window.moveAboutSlide = (n) => {
            const container = document.getElementById('about-carousel-wrapper');
            const slides = container.getElementsByClassName('about-slide');
            if (slides.length < 2) return;

            slides[aboutSlideIndex].classList.remove('active');
            aboutSlideIndex = (aboutSlideIndex + n + slides.length) % slides.length;
            slides[aboutSlideIndex].classList.add('active');
            
            // Reset timer on manual click
            if(slideInterval) {
                clearInterval(slideInterval);
                slideInterval = setInterval(() => window.moveAboutSlide(1), 10000);
            }
        };

        function initAboutCarousel(images) {
            const container = document.getElementById('about-carousel-wrapper');
            // Keep the buttons, remove old slides
            const buttons = container.querySelectorAll('button');
            container.innerHTML = '';
            
            // If we have an array, use it. If empty or single string, normalize.
            let imageList = [];
            if(Array.isArray(images) && images.length > 0) {
                imageList = images;
            } else if (typeof images === 'string' && images.length > 0) {
                imageList = [images];
            } else {
                imageList = [DEFAULT_ABOUT_IMG];
            }

            aboutSlides = imageList;

            imageList.forEach((url, i) => {
                const div = document.createElement('div');
                div.className = `about-slide ${i === 0 ? 'active' : ''}`;
                div.style.backgroundImage = `url('${url}')`;
                container.appendChild(div);
            });

            // Re-append buttons if we have multiple slides
            if (imageList.length > 1) {
                buttons.forEach(btn => container.appendChild(btn));
                // Start auto-scroll
                if(slideInterval) clearInterval(slideInterval);
                slideInterval = setInterval(() => window.moveAboutSlide(1), 10000);
            } else {
                // Hide buttons if only 1 image
                buttons.forEach(btn => btn.remove());
            }
        }

        function applyConfig(data) {
            // Hero Background
            const heroSection = document.querySelector('.page-header');
            const heroUrl = (data.aboutHeroImage && data.aboutHeroImage.trim() !== '') ? data.aboutHeroImage : DEFAULT_ABOUT_HERO;
            if(heroSection) heroSection.style.backgroundImage = `linear-gradient(rgba(0,0,0,0.7), rgba(0,0,0,0.7)), url("${heroUrl}")`;

            // About Slideshow (New Logic)
            // Checks for 'aboutSlideshow' array first, falls back to 'aboutImage' string
            if (data.aboutSlideshow && Array.isArray(data.aboutSlideshow) && data.aboutSlideshow.length > 0) {
                initAboutCarousel(data.aboutSlideshow);
            } else {
                initAboutCarousel(data.aboutImage || DEFAULT_ABOUT_IMG);
            }
        }

        // 1. INSTANT LOAD
        try {
            const cached = localStorage.getItem(CACHE_KEY);
            if (cached) {
                applyConfig(JSON.parse(cached));
            } else {
                // Default init
                initAboutCarousel(DEFAULT_ABOUT_IMG);
            }
        } catch (e) { console.warn("Cache error:", e); }

        signInAnonymously(auth).then(() => {
            const docRef = doc(db, `artifacts/${appId}/public/data`, 'site_config', 'main');
            onSnapshot(docRef, (doc) => {
                if(doc.exists()) {
                    const data = doc.data();
                    localStorage.setItem(CACHE_KEY, JSON.stringify(data));
                    applyConfig(data);
                } 
            });
        }).catch((error) => {
            console.error("Auth failed:", error);
        });
    </script>

</body>
</html>